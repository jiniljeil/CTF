        // Modal elements
        const modal = document.getElementById('animalModal');
        const modalBody = document.getElementById('modalBody');
        const closeBtn = document.querySelector('.close');

        // Animal link click handlers
        document.querySelectorAll('.animal-link').forEach(link => {
            link.addEventListener('click', async (e) => {
                e.preventDefault();
                const animal = e.target.dataset.animal;
                showModal(animal);
            });
        });

        // Close modal handlers
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Show modal and fetch animal data
        async function showModal(animal) {
            modal.style.display = 'block';
            modalBody.innerHTML = '<div class="loading">Loading animal information...</div>';

            try {
                const response = await fetch(`/api/animal/${animal}`, {
                    method: 'GET',
                    headers: {
                        'X-Signature': APP_SIGNATURES[animal],
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                displayAnimalData(data);
            } catch (error) {
                modalBody.innerHTML = `<div class="error">Failed to load animal information. Please try again later.</div>`;
                console.error('Error fetching animal data:', error);
            }
        }

        // Display animal data in modal
        function displayAnimalData(data) {
            let imagesHtml = '';
            if (data.imagedir) {
                imagesHtml = `
                    <div class="image-gallery">
                        <img width="100px" style="margin:auto" src="${data.imagedir}" alt="${data.name}">
                    </div>
                `;
            }

            modalBody.innerHTML = `
                <h2 class="animal-name">${data.name}</h2>
                <p class="animal-size">Size: ${data.size}</p>
                <p class="animal-description">${data.description}</p>
                ${imagesHtml}
            `;
        }