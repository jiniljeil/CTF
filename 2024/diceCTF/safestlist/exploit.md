safestlist sol
1. install service worker and use background fetch api
2. this essentially causes the browser to make a download, but this download is special since it resumes on browser start
3. lax + post csrf a lot of img tags to purify.js, with a prefix that gets sorted against the flag (see safelist writeup for more details)
4. delete the first post
5. if your post was sorted first, it would be deleted
6. if it was sorted last, it would not be deleted
7. when the browser bot checks /view, the browser will take longer to load the page if there are a lot of img tags
8. if it takes longer to load the page, the browser lasts longer and closes later
9. when it closes, the background fetch download stops
10. so, by timing how long your background fetch stays connected to your server, you can leak the outcome of the sort, and the flag